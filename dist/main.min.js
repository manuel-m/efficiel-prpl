var app=function(n){"use strict";function e(){n=function(){var n=document.createElement("script");n.src="addons.min.js",n.async=!0,document.head.insertBefore(n,document.head.childNodes[document.head.childNodes.length-1].nextSibling)},(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?n():document.addEventListener("DOMContentLoaded",n);var n}var t=function(n,e){var t=g,l=p;null===t&&console.warn("computations created without a root or parent will never be disposed");var r=new o(n,e);return g=p=r,null===h?function(n){h=d,d.changes.reset(),d.updates.reset();try{n.value=n.fn(n.value),(d.changes.count>0||d.updates.count>0)&&(d.time++,y(d))}finally{h=g=p=null}}(r):r.value=r.fn(r.value),t&&t!==v&&(null===t.owned?t.owned=[r]:t.owned.push(r)),g=t,p=l,function(){if(null!==p){if(r.age===d.time){if(r.state===f)throw new Error("circular dependency");N(r)}!function(n,e){null===n.log&&(n.log=new u);m(n.log,e)}(r,p)}return r.value}};Object.defineProperty(t,"default",{value:t}),t.root=function(n){var e=g,t=0===n.length?v:new o(null,null),l=void 0,r=0===n.length?null:function(){null!==h?d.disposes.add(t):k(t)};return g=t,null===h?l=function(n,e,t){try{return null===e?n():n(e)}finally{g=t}}(n,r,e):(l=null===r?n():n(r),g=e),l};t.on=function(n,e,l,r){Array.isArray(n)&&(o=n,n=function(){for(var n=0;n<o.length;n++)o[n]()});var o;return r=!!r,t(u,l);function u(t){var l=p;return n(),r?r=!1:(p=null,t=e(t),p=l),t}};t.data=function(n){var e=new r(n);return function(n){if(arguments.length>0){if(null!==h)if(e.pending!==s){if(n!==e.pending)throw new Error("conflicting changes: "+n+" !== "+e.pending)}else e.pending=n,d.changes.add(e);else null!==e.log?(e.pending=n,d.changes.add(e),w()):e.value=n;return n}return null!==p&&function(n,e){null===n.log&&(n.log=new u);m(n.log,e)}(e,p),e.value}},t.value=function(n,e){var l=t.data(n),r=-1;return function(t){if(0===arguments.length)return l();if(!(e?e(n,t):n===t)){var o=d.time;if(r===o)throw new Error("conflicting values: "+t+" is not the same as "+n);r=o,n=t,l(t)}return t}},t.freeze=function(n){var e=void 0;if(null!==h)e=n();else{(h=d).changes.reset();try{e=n(),w()}finally{h=null}}return e},t.sample=function(n){var e,t=p;return null!==t?(p=null,e=n(),p=t):e=n(),e},t.cleanup=function(n){null!==g?null===g.cleanups?g.cleanups=[n]:g.cleanups.push(n):console.warn("cleanups created without a root or parent will never be run")};var l=function(){return function(){this.time=0,this.changes=new i,this.updates=new i,this.disposes=new i}}(),r=function(){return function(n){this.value=n,this.pending=s,this.log=null}}(),o=function(){return function(n,e){this.fn=n,this.value=e,this.state=a,this.source1=null,this.source1slot=0,this.sources=null,this.sourceslots=null,this.log=null,this.owned=null,this.cleanups=null,this.age=d.time}}(),u=function(){return function(){this.node1=null,this.node1slot=0,this.nodes=null,this.nodeslots=null}}(),i=function(){function n(){this.items=[],this.count=0}return n.prototype.reset=function(){this.count=0},n.prototype.add=function(n){this.items[this.count++]=n},n.prototype.run=function(n){for(var e=this.items,t=0;t<this.count;t++)n(e[t]),e[t]=null;this.count=0},n}(),s={},a=0,c=1,f=2,d=new l,h=null,p=null,g=null,v=new o(null,null);function m(n,e){var t,l=null===e.source1?-1:null===e.sources?0:e.sources.length;null===n.node1?(n.node1=e,n.node1slot=l,t=-1):null===n.nodes?(n.nodes=[e],n.nodeslots=[l],t=0):(t=n.nodes.length,n.nodes.push(e),n.nodeslots.push(l)),null===e.source1?(e.source1=n,e.source1slot=t):null===e.sources?(e.sources=[n],e.sourceslots=[t]):(e.sources.push(n),e.sourceslots.push(t))}function w(){var n=g;d.updates.reset(),d.time++;try{y(d)}finally{h=p=null,g=n}}function y(n){var e=h,t=0;for(h=n,n.disposes.reset();0!==n.changes.count||0!==n.updates.count||0!==n.disposes.count;)if(t>0&&n.time++,n.changes.run(C),n.updates.run(N),n.disposes.run(k),t++>1e5)throw new Error("Runaway clock detected");h=e}function C(n){n.value=n.pending,n.pending=s,n.log&&b(n.log)}function b(n){var e=n.node1,t=n.nodes;if(null!==e&&A(e),null!==t)for(var l=0,r=t.length;l<r;l++)A(t[l])}function A(n){var e=d.time;n.age<e&&(n.age=e,n.state=c,d.updates.add(n),null!==n.owned&&_(n.owned),null!==n.log&&b(n.log))}function _(n){for(var e=0;e<n.length;e++){var t=n[e];t.age=d.time,t.state=a,null!==t.owned&&_(t.owned)}}function N(n){if(n.state===c){var e=g,t=p;g=p=n,n.state=f,x(n,!1),n.value=n.fn(n.value),n.state=a,g=e,p=t}}function x(n,e){var t,l,r=n.source1,o=n.sources,u=n.sourceslots,i=n.cleanups,s=n.owned;if(null!==i){for(t=0;t<i.length;t++)i[t](e);n.cleanups=null}if(null!==s){for(t=0;t<s.length;t++)k(s[t]);n.owned=null}if(null!==r&&(E(r,n.source1slot),n.source1=null),null!==o)for(t=0,l=o.length;t<l;t++)E(o.pop(),u.pop())}function E(n,e){var t,l,r=n.nodes,o=n.nodeslots;-1===e?n.node1=null:(t=r.pop(),l=o.pop(),e!==r.length&&(r[e]=t,o[e]=l,-1===l?t.source1slot=e:t.sourceslots[l]=e))}function k(n){n.fn=null,n.log=null,x(n,!0)}function T(n,e,l){var r=typeof e;if(l===e);else if("string"===r)l=n.innerText=e;else if("number"===r||"boolean"===r)e=e.toString(),l=n.innerText=e;else if(null==e)I(n),l="";else if("function"===r)t(function(){l=T(n,e(),l)});else if(e instanceof Node)Array.isArray(l)?0===l.length?n.appendChild(e):1===l.length?n.replaceChild(e,l[0]):(I(n),n.appendChild(e)):""===l?n.appendChild(e):n.replaceChild(e,n.firstChild),l=e;else{if(!Array.isArray(e))throw new Error("content must be Node, stringable, or array of same");var o=F([],e);0===o.length?I(n):Array.isArray(l)?0===l.length?z(n,o,0,o.length):P(n,l,o):""===l?z(n,o,0,o.length):P(n,[n.firstChild],o),l=o}return l}var B=-1,S=-2,j=0,O=16,L=1<<O,M=L-1;function P(n,e,t){var l,r,o,u=t.length,i=0,s=e.length-1,a=0,c=u-1,f=e[i],d=t[a],h=e[s],p=t[c],g=h.nextSibling,v=!0;n:for(;v;){for(v=!1;q(d,f,a,t);){if(i++,++a>c||i>s)break n;d=t[a],f=e[i]}for(;q(p,h,c,t);){if(g=h,s--,a>--c||i>s)break n;p=t[c],h=e[s]}for(;q(d,h,a,t);){if(v=!0,n.insertBefore(h,f),s--,++a>c||i>s)break n;d=t[a],h=e[s]}for(;q(p,f,c,t);){if(v=!0,null===g?n.appendChild(f):n.insertBefore(f,g),g=f,i++,a>--c||i>s)break n;p=t[c],f=e[i]}}if(a>c)for(;i<=s;)n.removeChild(e[s]),s--;else if(i>s)for(;a<=c;)D(n,t[a],g,a,t),a++;else{var m=[];for(l=i,r=(i<<O)+(j=(j+1)%L);l<=s;l++,r+=L)void 0===(f=e[l]).__surplus_order?Object.defineProperty(f,"__surplus_order",{value:r,writable:!0}):f.__surplus_order=r,f instanceof Text&&m.push(l);var w=new Array(c-a+1),y=[],C=0;for(l=a;l<=c;l++)"string"==typeof(d=t[l])?(y.push(l),w[l-a]=B):void 0!==(r=d.__surplus_order)&&(r&M)===j?(r>>=O,w[l-a]=r,e[r]=null,C++):w[l-a]=B;if(0!==C||0!==i||s!==e.length-1){var b=function(n){for(var e=[],t=[],l=-1,r=new Array(n.length),o=0,u=n.length;o<u;o++){var i=n[o];if(!(i<0)){var s=R(e,i);-1!==s&&(r[o]=t[s]),s===l?(e[++l]=i,t[l]=o):i<e[s+1]&&(e[s+1]=i,t[s+1]=o)}}for(o=t[l];l>=0;o=r[o],l--)e[l]=o;return e}(w);for(l=0;l<b.length;l++)w[b[l]]=S;var A=0,_=0,N=0;for(l=0,r=0,o=0;l<y.length;l++){for(A=y[l];r<b.length&&(_=b[r])<A-a;)r++;for(;o<m.length&&(N=m[o],0!==r)&&N<w[b[r-1]];)o++;o<m.length&&(r===b.length||N<w[_])?(f=e[N],d=t[A],f.data!==d&&(f.data=d),e[N]=null,t[A]=f,w[A]=S,o++):t[A]=document.createTextNode(t[A])}for(;i<=s;)null!==(f=e[i])&&n.removeChild(f),i++;for(;a<=c;)p=t[c],w[c-a]!==S&&(null===g?n.appendChild(p):n.insertBefore(p,g)),g=p,c--}else for(I(n);a<=c;)D(n,t[a],null,a,t),a++}}function q(n,e,t,l){return n===e||"string"==typeof n&&e instanceof Text&&(e.data!==n&&(e.data=n),l[t]=e,!0)}function z(n,e,t,l){for(var r;t<l;t++)(r=e[t])instanceof Node?n.appendChild(r):(r=e[t]=document.createTextNode(r),n.appendChild(r))}function D(n,e,t,l,r){"string"==typeof e&&(e=r[l]=document.createTextNode(e)),null===t?n.appendChild(e):n.insertBefore(e,t)}function F(n,e){for(var t=0,l=e.length;t<l;t++){var r=e[t];r instanceof Node?n.push(r):null==r||(Array.isArray(r)?F(n,r):"string"==typeof r?n.push(r):n.push(r.toString()))}return n}function I(n){n.textContent=""}function R(n,e){var t=-1,l=n.length;if(l>0&&n[l-1]<=e)return l-1;for(;l-t>1;){var r=Math.floor((t+l)/2);n[r]>e?l=r:t=r}return t}function G(n,e,t){var l=document.createElement(n);return e&&(l.className=e),t&&t.appendChild(l),l}var H={clic:0,route:"/",message:t.data("Click me"),views:{}};function J(){H.clic+=1,H.message("Click me ["+H.clic+"]")}var K={};Object.assign(K,{home:function(){var n,e,l;return n=G("div",null,null),(e=G("h1",null,n)).onclick=J,l=G("ul",null,n),t(function(n){return T(e,H.message(),n)},""),t(function(n){return T(l,["a","b"].map(function(n){return function(){var e;return T(e=G("li",null,null),n,""),e}()}),n)},""),n}()});var Q=t.data("home"),U=function(){var n;return n=G("div",null,null),t(function(e){return T(n,K[Q()],e)},""),n}();return function(n){var t=document.getElementById("app");window.requestAnimationFrame(function(){t.parentNode.replaceChild(U,t),t=void 0,setTimeout(e)})}(),n.go=Q,n.model={},n.routes=K,n.vm=H,n}({});
