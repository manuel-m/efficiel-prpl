var app=function(e){"use strict";var n=function(e,n){var t=p,r=h;null===t&&console.warn("computations created without a root or parent will never be disposed");var u=new o(e,n);return p=h=u,null===f?function(e){f=d,d.changes.reset(),d.updates.reset();try{e.value=e.fn(e.value),(d.changes.count>0||d.updates.count>0)&&(d.time++,y(d))}finally{f=p=h=null}}(u):u.value=u.fn(u.value),t&&t!==g&&(null===t.owned?t.owned=[u]:t.owned.push(u)),p=t,h=r,function(){if(null!==h){if(u.age===d.time){if(u.state===c)throw new Error("circular dependency");x(u)}!function(e,n){null===e.log&&(e.log=new l);v(e.log,n)}(u,h)}return u.value}};Object.defineProperty(n,"default",{value:n}),n.root=function(e){var n=p,t=0===e.length?g:new o(null,null),r=void 0,l=0===e.length?null:function(){null!==f?d.disposes.add(t):T(t)};return p=t,null===f?r=function(e,n,t){try{return null===n?e():e(n)}finally{p=t}}(e,l,n):(r=null===l?e():e(l),p=n),r};n.on=function(e,t,r,o){Array.isArray(e)&&(l=e,e=function(){for(var e=0;e<l.length;e++)l[e]()});var l;return o=!!o,n(u,r);function u(n){var r=h;return e(),o?o=!1:(h=null,n=t(n),h=r),n}};n.data=function(e){var n=new r(e);return function(e){if(arguments.length>0){if(null!==f)if(n.pending!==i){if(e!==n.pending)throw new Error("conflicting changes: "+e+" !== "+n.pending)}else n.pending=e,d.changes.add(n);else null!==n.log?(n.pending=e,d.changes.add(n),m()):n.value=e;return e}return null!==h&&function(e,n){null===e.log&&(e.log=new l);v(e.log,n)}(n,h),n.value}},n.value=function(e,t){var r=n.data(e),o=-1;return function(n){if(0===arguments.length)return r();if(!(t?t(e,n):e===n)){var l=d.time;if(o===l)throw new Error("conflicting values: "+n+" is not the same as "+e);o=l,e=n,r(n)}return n}},n.freeze=function(e){var n=void 0;if(null!==f)n=e();else{(f=d).changes.reset();try{n=e(),m()}finally{f=null}}return n},n.sample=function(e){var n,t=h;return null!==t?(h=null,n=e(),h=t):n=e(),n},n.cleanup=function(e){null!==p?null===p.cleanups?p.cleanups=[e]:p.cleanups.push(e):console.warn("cleanups created without a root or parent will never be run")};var t=function(){return function(){this.time=0,this.changes=new u,this.updates=new u,this.disposes=new u}}(),r=function(){return function(e){this.value=e,this.pending=i,this.log=null}}(),o=function(){return function(e,n){this.fn=e,this.value=n,this.state=a,this.source1=null,this.source1slot=0,this.sources=null,this.sourceslots=null,this.log=null,this.owned=null,this.cleanups=null,this.age=d.time}}(),l=function(){return function(){this.node1=null,this.node1slot=0,this.nodes=null,this.nodeslots=null}}(),u=function(){function e(){this.items=[],this.count=0}return e.prototype.reset=function(){this.count=0},e.prototype.add=function(e){this.items[this.count++]=e},e.prototype.run=function(e){for(var n=this.items,t=0;t<this.count;t++)e(n[t]),n[t]=null;this.count=0},e}(),i={},a=0,s=1,c=2,d=new t,f=null,h=null,p=null,g=new o(null,null);function v(e,n){var t,r=null===n.source1?-1:null===n.sources?0:n.sources.length;null===e.node1?(e.node1=n,e.node1slot=r,t=-1):null===e.nodes?(e.nodes=[n],e.nodeslots=[r],t=0):(t=e.nodes.length,e.nodes.push(n),e.nodeslots.push(r)),null===n.source1?(n.source1=e,n.source1slot=t):null===n.sources?(n.sources=[e],n.sourceslots=[t]):(n.sources.push(e),n.sourceslots.push(t))}function m(){var e=p;d.updates.reset(),d.time++;try{y(d)}finally{f=h=null,p=e}}function y(e){var n=f,t=0;for(f=e,e.disposes.reset();0!==e.changes.count||0!==e.updates.count||0!==e.disposes.count;)if(t>0&&e.time++,e.changes.run(w),e.updates.run(x),e.disposes.run(T),t++>1e5)throw new Error("Runaway clock detected");f=n}function w(e){e.value=e.pending,e.pending=i,e.log&&b(e.log)}function b(e){var n=e.node1,t=e.nodes;if(null!==n&&C(n),null!==t)for(var r=0,o=t.length;r<o;r++)C(t[r])}function C(e){var n=d.time;e.age<n&&(e.age=n,e.state=s,d.updates.add(e),null!==e.owned&&S(e.owned),null!==e.log&&b(e.log))}function S(e){for(var n=0;n<e.length;n++){var t=e[n];t.age=d.time,t.state=a,null!==t.owned&&S(t.owned)}}function x(e){if(e.state===s){var n=p,t=h;p=h=e,e.state=c,N(e,!1),e.value=e.fn(e.value),e.state=a,p=n,h=t}}function N(e,n){var t,r,o=e.source1,l=e.sources,u=e.sourceslots,i=e.cleanups,a=e.owned;if(null!==i){for(t=0;t<i.length;t++)i[t](n);e.cleanups=null}if(null!==a){for(t=0;t<a.length;t++)T(a[t]);e.owned=null}if(null!==o&&(A(o,e.source1slot),e.source1=null),null!==l)for(t=0,r=l.length;t<r;t++)A(l.pop(),u.pop())}function A(e,n){var t,r,o=e.nodes,l=e.nodeslots;-1===n?e.node1=null:(t=o.pop(),r=l.pop(),n!==o.length&&(o[n]=t,l[n]=r,-1===r?t.source1slot=n:t.sourceslots[r]=n))}function T(e){e.fn=null,e.log=null,N(e,!0)}var E=3;function k(e,t){var r=e.start.parentNode,o=e.start,l=null,u=typeof t;for("string"===u||"number"===u||"boolean"===u?(t=t.toString(),o.nodeType===E?(o.data=t,l=o):(t=document.createTextNode(t),r.replaceChild(t,o),e.end===o&&(e.end=t),e.start=l=t)):t instanceof Node?(o!==t&&(r.replaceChild(t,o),e.end===o&&(e.end=t),e.start=t),l=t):Array.isArray(t)?i(t):t instanceof Function?(n(function(){k(e,t())}),l=e.end):null!==t&&void 0!==t&&(t=t.toString(),o.nodeType===E?(o.data=t,l=o):(t=document.createTextNode(t),r.replaceChild(t,o),e.end===o&&(e.end=t),e.start=l=t)),null===l&&(e.start===r.firstChild&&e.end===r.lastChild&&e.start!==e.end?(r.textContent="",t=document.createTextNode(""),r.appendChild(t),l=e.start=e.end=t):o.nodeType===E?(o.data="",l=o):(t=document.createTextNode(""),r.replaceChild(t,o),e.end===o&&(e.end=t),e.start=l=t));l!==e.end;)o=e.end,e.end=o.previousSibling,r.removeChild(o);return e;function i(n){for(var t=0,u=n.length;t<u;t++){var a=n[t];l===e.end?a instanceof Node?l=e.end=l.nextSibling?r.insertBefore(a,l.nextSibling):r.appendChild(a):a instanceof Array?i(a):null!==a&&void 0!==a&&(a=document.createTextNode(a.toString()),l=e.end=l.nextSibling?r.insertBefore(a,l.nextSibling):r.appendChild(a)):a instanceof Node?(o!==a?null===l?(e.end===a&&(e.end=a.previousSibling),r.replaceChild(a,o),e.start=a,e.end===o&&(e.end=a),o=a.nextSibling):o.nextSibling===a&&o!==a.nextSibling&&o!==e.end?(r.removeChild(o),o=a.nextSibling):(e.end===a&&(e.end=a.previousSibling),r.insertBefore(a,o)):o=o.nextSibling,l=a):a instanceof Array?i(a):null!==a&&void 0!==a&&(a=a.toString(),o.nodeType===E?(o.data=a,null===l&&(e.start=o),o=(l=o).nextSibling):(a=document.createTextNode(a),r.insertBefore(a,o),null===l&&(e.start=a),l=a))}}}function _(e,t,r){var o=typeof t;if(r===t);else if("string"===o)r=e.innerText=t;else if("number"===o||"boolean"===o)t=t.toString(),r=e.innerText=t;else if(null==t)q(e),r="";else if("function"===o)n(function(){r=_(e,t(),r)});else if(t instanceof Node)Array.isArray(r)?0===r.length?e.appendChild(t):1===r.length?e.replaceChild(t,r[0]):(q(e),e.appendChild(t)):""===r?e.appendChild(t):e.replaceChild(t,e.firstChild),r=t;else{if(!Array.isArray(t))throw new Error("content must be Node, stringable, or array of same");var l=P([],t);0===l.length?q(e):Array.isArray(r)?0===r.length?D(e,l,0,l.length):L(e,r,l):""===r?D(e,l,0,l.length):L(e,[e.firstChild],l),r=l}return r}var B=-1,j=-2,O=0,R=16,F=1<<R,I=F-1;function L(e,n,t){var r,o,l,u=t.length,i=0,a=n.length-1,s=0,c=u-1,d=n[i],f=t[s],h=n[a],p=t[c],g=h.nextSibling,v=!0;e:for(;v;){for(v=!1;z(f,d,s,t);){if(i++,++s>c||i>a)break e;f=t[s],d=n[i]}for(;z(p,h,c,t);){if(g=h,a--,s>--c||i>a)break e;p=t[c],h=n[a]}for(;z(f,h,s,t);){if(v=!0,e.insertBefore(h,d),a--,++s>c||i>a)break e;f=t[s],h=n[a]}for(;z(p,d,c,t);){if(v=!0,null===g?e.appendChild(d):e.insertBefore(d,g),g=d,i++,s>--c||i>a)break e;p=t[c],d=n[i]}}if(s>c)for(;i<=a;)e.removeChild(n[a]),a--;else if(i>a)for(;s<=c;)M(e,t[s],g,s,t),s++;else{var m=[];for(r=i,o=(i<<R)+(O=(O+1)%F);r<=a;r++,o+=F)void 0===(d=n[r]).__surplus_order?Object.defineProperty(d,"__surplus_order",{value:o,writable:!0}):d.__surplus_order=o,d instanceof Text&&m.push(r);var y=new Array(c-s+1),w=[],b=0;for(r=s;r<=c;r++)"string"==typeof(f=t[r])?(w.push(r),y[r-s]=B):void 0!==(o=f.__surplus_order)&&(o&I)===O?(o>>=R,y[r-s]=o,n[o]=null,b++):y[r-s]=B;if(0!==b||0!==i||a!==n.length-1){var C=function(e){for(var n=[],t=[],r=-1,o=new Array(e.length),l=0,u=e.length;l<u;l++){var i=e[l];if(!(i<0)){var a=Z(n,i);-1!==a&&(o[l]=t[a]),a===r?(n[++r]=i,t[r]=l):i<n[a+1]&&(n[a+1]=i,t[a+1]=l)}}for(l=t[r];r>=0;l=o[l],r--)n[r]=l;return n}(y);for(r=0;r<C.length;r++)y[C[r]]=j;var S=0,x=0,N=0;for(r=0,o=0,l=0;r<w.length;r++){for(S=w[r];o<C.length&&(x=C[o])<S-s;)o++;for(;l<m.length&&(N=m[l],0!==o)&&N<y[C[o-1]];)l++;l<m.length&&(o===C.length||N<y[x])?(d=n[N],f=t[S],d.data!==f&&(d.data=f),n[N]=null,t[S]=d,y[S]=j,l++):t[S]=document.createTextNode(t[S])}for(;i<=a;)null!==(d=n[i])&&e.removeChild(d),i++;for(;s<=c;)p=t[c],y[c-s]!==j&&(null===g?e.appendChild(p):e.insertBefore(p,g)),g=p,c--}else for(q(e);s<=c;)M(e,t[s],null,s,t),s++}}function z(e,n,t,r){return e===n||"string"==typeof e&&n instanceof Text&&(n.data!==e&&(n.data=e),r[t]=n,!0)}function D(e,n,t,r){for(var o;t<r;t++)(o=n[t])instanceof Node?e.appendChild(o):(o=n[t]=document.createTextNode(o),e.appendChild(o))}function M(e,n,t,r,o){"string"==typeof n&&(n=o[r]=document.createTextNode(n)),null===t?e.appendChild(n):e.insertBefore(n,t)}function P(e,n){for(var t=0,r=n.length;t<r;t++){var o=n[t];o instanceof Node?e.push(o):null==o||(Array.isArray(o)?P(e,o):"string"==typeof o?e.push(o):e.push(o.toString()))}return e}function q(e){e.textContent=""}function Z(e,n){var t=-1,r=e.length;if(r>0&&e[r-1]<=n)return r-1;for(;r-t>1;){var o=Math.floor((t+r)/2);e[o]>n?r=o:t=o}return t}var G="http://www.w3.org/2000/svg";function H(e,n,t){var r=document.createElement(e);return n&&(r.className=n),t&&t.appendChild(r),r}function J(e,n,t){!1===t||null===t||void 0===t?e.removeAttribute(n):e.setAttribute(n,t)}function K(e,n){for(var t=Object.keys(n),r=0,o=t.length;r<o;r++){var l=t[r];e[l]=n[l]}}function Q(e,n,t,r){n in e&&!r?e[n]=t:J(e,n,t)}var U=/^on[A-Z]/;var V=Object.freeze({insert:k,content:_,spread:function(e,n,t){for(var r=Object.keys(n),o=0,l=r.length;o<l;o++){var u=r[o];"style"===u?K(e.style,n.style):Q(e,(i=u,a=t,U.test(i)?"onDoubleClick"===i?"ondblclick":i.toLowerCase():a?"className"===i?"class":"htmlFor"===i?"for":i:i),n[u],t)}var i,a},assign:K,S:n,createElement:H,createSvgElement:function(e,n,t){var r=document.createElementNS(G,e);return n&&r.setAttribute("class",n),t&&t.appendChild(r),r},createComment:function(e,n){var t=document.createComment(e);return n.appendChild(t),t},createTextNode:function(e,n){var t=document.createTextNode(e);return n.appendChild(t),t},setAttribute:J});function W(){e=function(){var e=document.createElement("script");e.src="addons.min.js",e.async=!0,document.head.insertBefore(e,document.head.childNodes[document.head.childNodes.length-1].nextSibling)},(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e);var e}var X=n.data();var Y={},$={clic:0,route:"/",message:n.data("Click me")},ee={home:function(e,n){var t=n.vm;return function(){var o,l,u;return o=e.createElement("div",null,null),(l=e.createElement("h1",null,o)).onclick=r,u=e.createElement("ul",null,o),e.S(function(n){return e.content(l,t.message(),n)},""),e.S(function(t){return e.content(u,["profile"].map(function(t){return function(){var r,o;return r=e.createElement("li",null,null),o=e.createElement("button",null,r),e.content(o,t,""),e.S(function(){o.onclick=function(){n.go(t)}}),r}()}),t)},""),o}();function r(){t.clic+=1,t.message("Click me ["+t.clic+"]")}}(V,{go:X,model:Y,vm:$})};return function(e){var t,r=document.getElementById(e.mountId),o=(t={defaultRoute:e.defaultRoute,routes:e.routes},X(t.defaultRoute),function(){var e;return e=H("div",null,null),n(function(n){return _(e,t.routes[X()],n)},""),e}());window.requestAnimationFrame(function(){r.parentNode.replaceChild(o,r),r=void 0,setTimeout(W)})}({defaultRoute:"home",mountId:"app",routes:ee}),e.S=n,e.Surplus=V,e.go=X,e.model=Y,e.routes=ee,e.vm=$,e}({});
