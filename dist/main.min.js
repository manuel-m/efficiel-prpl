var app=function(e){"use strict";var n=function(e,n){var t=p,r=h;null===t&&console.warn("computations created without a root or parent will never be disposed");var u=new l(e,n);return p=h=u,null===f?function(e){f=d,d.changes.reset(),d.updates.reset();try{e.value=e.fn(e.value),(d.changes.count>0||d.updates.count>0)&&(d.time++,y(d))}finally{f=p=h=null}}(u):u.value=u.fn(u.value),t&&t!==g&&(null===t.owned?t.owned=[u]:t.owned.push(u)),p=t,h=r,function(){if(null!==h){if(u.age===d.time){if(u.state===c)throw new Error("circular dependency");x(u)}!function(e,n){null===e.log&&(e.log=new o);v(e.log,n)}(u,h)}return u.value}};Object.defineProperty(n,"default",{value:n}),n.root=function(e){var n=p,t=0===e.length?g:new l(null,null),r=void 0,o=0===e.length?null:function(){null!==f?d.disposes.add(t):T(t)};return p=t,null===f?r=function(e,n,t){try{return null===n?e():e(n)}finally{p=t}}(e,o,n):(r=null===o?e():e(o),p=n),r};n.on=function(e,t,r,l){Array.isArray(e)&&(o=e,e=function(){for(var e=0;e<o.length;e++)o[e]()});var o;return l=!!l,n(u,r);function u(n){var r=h;return e(),l?l=!1:(h=null,n=t(n),h=r),n}};n.data=function(e){var n=new r(e);return function(e){if(arguments.length>0){if(null!==f)if(n.pending!==i){if(e!==n.pending)throw new Error("conflicting changes: "+e+" !== "+n.pending)}else n.pending=e,d.changes.add(n);else null!==n.log?(n.pending=e,d.changes.add(n),m()):n.value=e;return e}return null!==h&&function(e,n){null===e.log&&(e.log=new o);v(e.log,n)}(n,h),n.value}},n.value=function(e,t){var r=n.data(e),l=-1;return function(n){if(0===arguments.length)return r();if(!(t?t(e,n):e===n)){var o=d.time;if(l===o)throw new Error("conflicting values: "+n+" is not the same as "+e);l=o,e=n,r(n)}return n}},n.freeze=function(e){var n=void 0;if(null!==f)n=e();else{(f=d).changes.reset();try{n=e(),m()}finally{f=null}}return n},n.sample=function(e){var n,t=h;return null!==t?(h=null,n=e(),h=t):n=e(),n},n.cleanup=function(e){null!==p?null===p.cleanups?p.cleanups=[e]:p.cleanups.push(e):console.warn("cleanups created without a root or parent will never be run")};var t=function(){return function(){this.time=0,this.changes=new u,this.updates=new u,this.disposes=new u}}(),r=function(){return function(e){this.value=e,this.pending=i,this.log=null}}(),l=function(){return function(e,n){this.fn=e,this.value=n,this.state=a,this.source1=null,this.source1slot=0,this.sources=null,this.sourceslots=null,this.log=null,this.owned=null,this.cleanups=null,this.age=d.time}}(),o=function(){return function(){this.node1=null,this.node1slot=0,this.nodes=null,this.nodeslots=null}}(),u=function(){function e(){this.items=[],this.count=0}return e.prototype.reset=function(){this.count=0},e.prototype.add=function(e){this.items[this.count++]=e},e.prototype.run=function(e){for(var n=this.items,t=0;t<this.count;t++)e(n[t]),n[t]=null;this.count=0},e}(),i={},a=0,s=1,c=2,d=new t,f=null,h=null,p=null,g=new l(null,null);function v(e,n){var t,r=null===n.source1?-1:null===n.sources?0:n.sources.length;null===e.node1?(e.node1=n,e.node1slot=r,t=-1):null===e.nodes?(e.nodes=[n],e.nodeslots=[r],t=0):(t=e.nodes.length,e.nodes.push(n),e.nodeslots.push(r)),null===n.source1?(n.source1=e,n.source1slot=t):null===n.sources?(n.sources=[e],n.sourceslots=[t]):(n.sources.push(e),n.sourceslots.push(t))}function m(){var e=p;d.updates.reset(),d.time++;try{y(d)}finally{f=h=null,p=e}}function y(e){var n=f,t=0;for(f=e,e.disposes.reset();0!==e.changes.count||0!==e.updates.count||0!==e.disposes.count;)if(t>0&&e.time++,e.changes.run(w),e.updates.run(x),e.disposes.run(T),t++>1e5)throw new Error("Runaway clock detected");f=n}function w(e){e.value=e.pending,e.pending=i,e.log&&b(e.log)}function b(e){var n=e.node1,t=e.nodes;if(null!==n&&C(n),null!==t)for(var r=0,l=t.length;r<l;r++)C(t[r])}function C(e){var n=d.time;e.age<n&&(e.age=n,e.state=s,d.updates.add(e),null!==e.owned&&S(e.owned),null!==e.log&&b(e.log))}function S(e){for(var n=0;n<e.length;n++){var t=e[n];t.age=d.time,t.state=a,null!==t.owned&&S(t.owned)}}function x(e){if(e.state===s){var n=p,t=h;p=h=e,e.state=c,N(e,!1),e.value=e.fn(e.value),e.state=a,p=n,h=t}}function N(e,n){var t,r,l=e.source1,o=e.sources,u=e.sourceslots,i=e.cleanups,a=e.owned;if(null!==i){for(t=0;t<i.length;t++)i[t](n);e.cleanups=null}if(null!==a){for(t=0;t<a.length;t++)T(a[t]);e.owned=null}if(null!==l&&(A(l,e.source1slot),e.source1=null),null!==o)for(t=0,r=o.length;t<r;t++)A(o.pop(),u.pop())}function A(e,n){var t,r,l=e.nodes,o=e.nodeslots;-1===n?e.node1=null:(t=l.pop(),r=o.pop(),n!==l.length&&(l[n]=t,o[n]=r,-1===r?t.source1slot=n:t.sourceslots[r]=n))}function T(e){e.fn=null,e.log=null,N(e,!0)}var E=3;function k(e,t){var r=e.start.parentNode,l=e.start,o=null,u=typeof t;for("string"===u||"number"===u||"boolean"===u?(t=t.toString(),l.nodeType===E?(l.data=t,o=l):(t=document.createTextNode(t),r.replaceChild(t,l),e.end===l&&(e.end=t),e.start=o=t)):t instanceof Node?(l!==t&&(r.replaceChild(t,l),e.end===l&&(e.end=t),e.start=t),o=t):Array.isArray(t)?i(t):t instanceof Function?(n(function(){k(e,t())}),o=e.end):null!==t&&void 0!==t&&(t=t.toString(),l.nodeType===E?(l.data=t,o=l):(t=document.createTextNode(t),r.replaceChild(t,l),e.end===l&&(e.end=t),e.start=o=t)),null===o&&(e.start===r.firstChild&&e.end===r.lastChild&&e.start!==e.end?(r.textContent="",t=document.createTextNode(""),r.appendChild(t),o=e.start=e.end=t):l.nodeType===E?(l.data="",o=l):(t=document.createTextNode(""),r.replaceChild(t,l),e.end===l&&(e.end=t),e.start=o=t));o!==e.end;)l=e.end,e.end=l.previousSibling,r.removeChild(l);return e;function i(n){for(var t=0,u=n.length;t<u;t++){var a=n[t];o===e.end?a instanceof Node?o=e.end=o.nextSibling?r.insertBefore(a,o.nextSibling):r.appendChild(a):a instanceof Array?i(a):null!==a&&void 0!==a&&(a=document.createTextNode(a.toString()),o=e.end=o.nextSibling?r.insertBefore(a,o.nextSibling):r.appendChild(a)):a instanceof Node?(l!==a?null===o?(e.end===a&&(e.end=a.previousSibling),r.replaceChild(a,l),e.start=a,e.end===l&&(e.end=a),l=a.nextSibling):l.nextSibling===a&&l!==a.nextSibling&&l!==e.end?(r.removeChild(l),l=a.nextSibling):(e.end===a&&(e.end=a.previousSibling),r.insertBefore(a,l)):l=l.nextSibling,o=a):a instanceof Array?i(a):null!==a&&void 0!==a&&(a=a.toString(),l.nodeType===E?(l.data=a,null===o&&(e.start=l),l=(o=l).nextSibling):(a=document.createTextNode(a),r.insertBefore(a,l),null===o&&(e.start=a),o=a))}}}function _(e,t,r){var l=typeof t;if(r===t);else if("string"===l)r=e.innerText=t;else if("number"===l||"boolean"===l)t=t.toString(),r=e.innerText=t;else if(null==t)M(e),r="";else if("function"===l)n(function(){r=_(e,t(),r)});else if(t instanceof Node)Array.isArray(r)?0===r.length?e.appendChild(t):1===r.length?e.replaceChild(t,r[0]):(M(e),e.appendChild(t)):""===r?e.appendChild(t):e.replaceChild(t,e.firstChild),r=t;else{if(!Array.isArray(t))throw new Error("content must be Node, stringable, or array of same");var o=L([],t);0===o.length?M(e):Array.isArray(r)?0===r.length?q(e,o,0,o.length):z(e,r,o):""===r?q(e,o,0,o.length):z(e,[e.firstChild],o),r=o}return r}var B=-1,j=-2,O=0,R=16,F=1<<R,I=F-1;function z(e,n,t){var r,l,o,u=t.length,i=0,a=n.length-1,s=0,c=u-1,d=n[i],f=t[s],h=n[a],p=t[c],g=h.nextSibling,v=!0;e:for(;v;){for(v=!1;P(f,d,s,t);){if(i++,++s>c||i>a)break e;f=t[s],d=n[i]}for(;P(p,h,c,t);){if(g=h,a--,s>--c||i>a)break e;p=t[c],h=n[a]}for(;P(f,h,s,t);){if(v=!0,e.insertBefore(h,d),a--,++s>c||i>a)break e;f=t[s],h=n[a]}for(;P(p,d,c,t);){if(v=!0,null===g?e.appendChild(d):e.insertBefore(d,g),g=d,i++,s>--c||i>a)break e;p=t[c],d=n[i]}}if(s>c)for(;i<=a;)e.removeChild(n[a]),a--;else if(i>a)for(;s<=c;)D(e,t[s],g,s,t),s++;else{var m=[];for(r=i,l=(i<<R)+(O=(O+1)%F);r<=a;r++,l+=F)void 0===(d=n[r]).__surplus_order?Object.defineProperty(d,"__surplus_order",{value:l,writable:!0}):d.__surplus_order=l,d instanceof Text&&m.push(r);var y=new Array(c-s+1),w=[],b=0;for(r=s;r<=c;r++)"string"==typeof(f=t[r])?(w.push(r),y[r-s]=B):void 0!==(l=f.__surplus_order)&&(l&I)===O?(l>>=R,y[r-s]=l,n[l]=null,b++):y[r-s]=B;if(0!==b||0!==i||a!==n.length-1){var C=function(e){for(var n=[],t=[],r=-1,l=new Array(e.length),o=0,u=e.length;o<u;o++){var i=e[o];if(!(i<0)){var a=Z(n,i);-1!==a&&(l[o]=t[a]),a===r?(n[++r]=i,t[r]=o):i<n[a+1]&&(n[a+1]=i,t[a+1]=o)}}for(o=t[r];r>=0;o=l[o],r--)n[r]=o;return n}(y);for(r=0;r<C.length;r++)y[C[r]]=j;var S=0,x=0,N=0;for(r=0,l=0,o=0;r<w.length;r++){for(S=w[r];l<C.length&&(x=C[l])<S-s;)l++;for(;o<m.length&&(N=m[o],0!==l)&&N<y[C[l-1]];)o++;o<m.length&&(l===C.length||N<y[x])?(d=n[N],f=t[S],d.data!==f&&(d.data=f),n[N]=null,t[S]=d,y[S]=j,o++):t[S]=document.createTextNode(t[S])}for(;i<=a;)null!==(d=n[i])&&e.removeChild(d),i++;for(;s<=c;)p=t[c],y[c-s]!==j&&(null===g?e.appendChild(p):e.insertBefore(p,g)),g=p,c--}else for(M(e);s<=c;)D(e,t[s],null,s,t),s++}}function P(e,n,t,r){return e===n||"string"==typeof e&&n instanceof Text&&(n.data!==e&&(n.data=e),r[t]=n,!0)}function q(e,n,t,r){for(var l;t<r;t++)(l=n[t])instanceof Node?e.appendChild(l):(l=n[t]=document.createTextNode(l),e.appendChild(l))}function D(e,n,t,r,l){"string"==typeof n&&(n=l[r]=document.createTextNode(n)),null===t?e.appendChild(n):e.insertBefore(n,t)}function L(e,n){for(var t=0,r=n.length;t<r;t++){var l=n[t];l instanceof Node?e.push(l):null==l||(Array.isArray(l)?L(e,l):"string"==typeof l?e.push(l):e.push(l.toString()))}return e}function M(e){e.textContent=""}function Z(e,n){var t=-1,r=e.length;if(r>0&&e[r-1]<=n)return r-1;for(;r-t>1;){var l=Math.floor((t+r)/2);e[l]>n?r=l:t=l}return t}var G="http://www.w3.org/2000/svg";function H(e,n,t){var r=document.createElement(e);return n&&(r.className=n),t&&t.appendChild(r),r}function J(e,n,t){!1===t||null===t||void 0===t?e.removeAttribute(n):e.setAttribute(n,t)}function K(e,n){for(var t=Object.keys(n),r=0,l=t.length;r<l;r++){var o=t[r];e[o]=n[o]}}function Q(e,n,t,r){n in e&&!r?e[n]=t:J(e,n,t)}var U=/^on[A-Z]/;var V=Object.freeze({insert:k,content:_,spread:function(e,n,t){for(var r=Object.keys(n),l=0,o=r.length;l<o;l++){var u=r[l];"style"===u?K(e.style,n.style):Q(e,(i=u,a=t,U.test(i)?"onDoubleClick"===i?"ondblclick":i.toLowerCase():a?"className"===i?"class":"htmlFor"===i?"for":i:i),n[u],t)}var i,a},assign:K,S:n,createElement:H,createSvgElement:function(e,n,t){var r=document.createElementNS(G,e);return n&&r.setAttribute("class",n),t&&t.appendChild(r),r},createComment:function(e,n){var t=document.createComment(e);return n.appendChild(t),t},createTextNode:function(e,n){var t=document.createTextNode(e);return n.appendChild(t),t},setAttribute:J}),W=document;var X=n.data();var Y={},$={clic:0,route:"/",message:n.data("Click me")},ee={home:function(e,n){var t=n.vm;return function(){var l,o,u;return l=e.createElement("div",null,null),(o=e.createElement("h1",null,l)).onclick=r,u=e.createElement("ul",null,l),e.S(function(n){return e.content(o,t.message(),n)},""),e.S(function(t){return e.content(u,["profile"].map(function(t){return function(){var r,l;return r=e.createElement("li",null,null),l=e.createElement("button",null,r),e.content(l,t,""),e.S(function(){l.onclick=function(){n.go(t)}}),r}()}),t)},""),l}();function r(){t.clic+=1,t.message("Click me ["+t.clic+"]")}}(V,{go:X,model:Y,vm:$})};return function(e){var t,r=document.getElementById(e.mountId),l=(t={defaultRoute:e.defaultRoute,routes:e.routes},X(t.defaultRoute),function(){var e;return e=H("div",null,null),n(function(n){return _(e,t.routes[X()],n)},""),e}());window.requestAnimationFrame(function(){r.parentNode.replaceChild(l,r),r=void 0,function(e){var n=W.createElement("script");n.src=e,n.async=!0,W.head.insertBefore(n,W.head.childNodes[W.head.childNodes.length-1].nextSibling)}(e.addonsScript)})}({addonsScript:"addons.min.js",defaultRoute:"home",mountId:"app",routes:ee}),e.S=n,e.Surplus=V,e.go=X,e.model=Y,e.routes=ee,e.vm=$,e}({});
